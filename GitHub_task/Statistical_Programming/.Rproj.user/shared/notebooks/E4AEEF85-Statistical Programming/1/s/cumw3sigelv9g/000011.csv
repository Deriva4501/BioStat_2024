"0","# Создание набора данных с обработкой дат"
"0","dates_processed <- MH_data %>%"
"0","  select(STUDYID, SUBJID, MHSEQ, MHENRTPT, MHSTDTC, MHENDTC) %>%"
"0","  mutate("
"0","    MHSTDTC = as.character(MHSTDTC),"
"0","    MHSEQ = as.integer(MHSEQ),"
"0","    ASTDT = case_when("
"0","      nchar(MHSTDTC) == 4 ~ format(as.Date(paste0(MHSTDTC, ""-01-01""), ""%Y-%m-%d""), ""%d.%m.%Y""),"
"0","      nchar(MHSTDTC) == 7 ~ format(as.Date(paste0(MHSTDTC, ""-01""), ""%Y-%m-%d""), ""%d.%m.%Y""),"
"0","      TRUE ~ format(as.Date(MHSTDTC, ""%Y-%m-%d""), ""%d.%m.%Y"")"
"0","    ),"
"0","    ASTDTF = case_when("
"0","      is.na(MHSTDTC) ~ 'Y',"
"0","      nchar(MHSTDTC) == 4 ~ 'M',"
"0","      nchar(MHSTDTC) == 7 ~ 'D',"
"0","      TRUE ~ """""
"0","    ),"
"0","    MHENDTC = as.character(MHENDTC),"
"0","    AENDT = case_when("
"0","      MHENRTPT == 'ONGOING' ~ """","
"0","      nchar(MHENDTC) == 4 ~ format(as.Date(paste0(MHENDTC, ""-01-01""), ""%Y-%m-%d""), ""%d.%m.%Y""),"
"0","      nchar(MHENDTC) == 7 ~ format(as.Date(paste0(MHENDTC, ""-01""), ""%Y-%m-%d""), ""%d.%m.%Y""),"
"0","      TRUE ~ format(as.Date(MHENDTC, ""%Y-%m-%d""), ""%d.%m.%Y"")"
"0","    ),"
"0","    AENDTF = case_when("
"0","      is.na(MHENDTC) ~ 'Y',"
"0","      nchar(MHENDTC) == 4 ~ 'M',"
"0","      nchar(MHENDTC) == 7 ~ 'D',"
"0","      TRUE ~ """""
"0","    ),"
"0","    MHENRF = if_else(MHENRTPT == 'ONGOING', 'ONGOING', """")"
"0","  )"
"0",""
